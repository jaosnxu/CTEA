# CHU TEA Platform - Production Environment Variables Template
# 
# Instructions:
# 1. Copy this file to .env.production
# 2. Replace all placeholder values with your actual credentials
# 3. Never commit .env.production to version control
# 4. Restart PM2 after changes: pm2 restart chutea-backend

# ==========================================
# Database Configuration
# ==========================================

# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
# Replace with values from deploy-tencent.sh output
DATABASE_URL=postgresql://chutea_admin:YOUR_DB_PASSWORD_HERE@localhost:5432/chutea_prod

# Database pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10

# ==========================================
# Server Configuration
# ==========================================

# Node environment
NODE_ENV=production

# Server port (PM2 will use 3000, 3001 for cluster mode)
PORT=3000

# Public URL (your Tencent Cloud domain)
PUBLIC_URL=https://your-domain.com

# CORS allowed origins (comma-separated)
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com

# ==========================================
# JWT & Authentication
# ==========================================

# JWT secret for token signing (generate with: openssl rand -base64 64)
JWT_SECRET=REPLACE_WITH_SECURE_RANDOM_STRING_64_CHARS

# JWT expiration time
JWT_EXPIRES_IN=7d

# OAuth server URL (if using external OAuth)
OAUTH_SERVER_URL=https://oauth.your-domain.com

# OAuth portal URL
OAUTH_PORTAL_URL=https://login.your-domain.com

# ==========================================
# Owner Configuration
# ==========================================

# System owner name
OWNER_NAME=CHU TEA Admin

# System owner OpenID (for admin access)
OWNER_OPEN_ID=admin@chutea.com

# ==========================================
# Payment Gateway Configuration
# ==========================================

# Tinkoff Payment Gateway
TINKOFF_MERCHANT_ID=YOUR_TINKOFF_MERCHANT_ID
TINKOFF_SECRET_KEY=YOUR_TINKOFF_SECRET_KEY
TINKOFF_API_URL=https://securepay.tinkoff.ru/v2

# YooKassa Payment Gateway (alternative)
YOOKASSA_SHOP_ID=YOUR_YOOKASSA_SHOP_ID
YOOKASSA_SECRET_KEY=YOUR_YOOKASSA_SECRET_KEY
YOOKASSA_API_URL=https://api.yookassa.ru/v3

# Payment webhook secret (generate with: openssl rand -hex 32)
PAYMENT_WEBHOOK_SECRET=REPLACE_WITH_SECURE_RANDOM_HEX_STRING

# ==========================================
# IIKO POS Integration
# ==========================================

# IIKO API credentials
IIKO_API_URL=https://api-ru.iiko.services
IIKO_API_LOGIN=YOUR_IIKO_LOGIN
IIKO_API_PASSWORD=YOUR_IIKO_PASSWORD
IIKO_ORGANIZATION_ID=YOUR_IIKO_ORG_ID

# IIKO webhook secret (generate with: openssl rand -hex 32)
IIKO_WEBHOOK_SECRET=REPLACE_WITH_SECURE_RANDOM_HEX_STRING

# IIKO sync interval (in minutes)
IIKO_SYNC_INTERVAL=5

# ==========================================
# Frontend Configuration (Vite)
# ==========================================

# App title
VITE_APP_TITLE=CHU TEA

# App logo URL
VITE_APP_LOGO=/logo.svg

# App ID
VITE_APP_ID=chutea-prod

# Analytics endpoint (if using custom analytics)
VITE_ANALYTICS_ENDPOINT=https://analytics.your-domain.com/api/event
VITE_ANALYTICS_WEBSITE_ID=YOUR_ANALYTICS_WEBSITE_ID

# Frontend Forge API (if using AI features)
VITE_FRONTEND_FORGE_API_KEY=YOUR_FRONTEND_FORGE_API_KEY
VITE_FRONTEND_FORGE_API_URL=https://api.forge.your-domain.com

# OAuth portal URL (frontend)
VITE_OAUTH_PORTAL_URL=https://login.your-domain.com

# ==========================================
# Backend Forge API (AI/ML features)
# ==========================================

BUILT_IN_FORGE_API_KEY=YOUR_BACKEND_FORGE_API_KEY
BUILT_IN_FORGE_API_URL=https://api.forge.your-domain.com

# ==========================================
# Telegram Bot Configuration
# ==========================================

# Telegram Bot Token (from @BotFather)
TELEGRAM_BOT_TOKEN=YOUR_TELEGRAM_BOT_TOKEN

# Telegram Webhook URL
TELEGRAM_WEBHOOK_URL=https://your-domain.com/webhook/telegram

# ==========================================
# SMS Verification (Tencent Cloud SMS)
# ==========================================

# Tencent Cloud SMS credentials
TENCENT_SMS_APP_ID=YOUR_TENCENT_SMS_APP_ID
TENCENT_SMS_APP_KEY=YOUR_TENCENT_SMS_APP_KEY
TENCENT_SMS_SIGN_NAME=CHU TEA
TENCENT_SMS_TEMPLATE_ID=YOUR_SMS_TEMPLATE_ID

# ==========================================
# File Storage (Tencent Cloud COS)
# ==========================================

# Tencent Cloud COS (Cloud Object Storage)
COS_SECRET_ID=YOUR_COS_SECRET_ID
COS_SECRET_KEY=YOUR_COS_SECRET_KEY
COS_BUCKET=chutea-prod-1234567890
COS_REGION=ap-guangzhou
COS_DOMAIN=https://chutea-prod-1234567890.cos.ap-guangzhou.myqcloud.com

# ==========================================
# Logging & Monitoring
# ==========================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Sentry DSN (error tracking)
SENTRY_DSN=YOUR_SENTRY_DSN

# Sentry environment
SENTRY_ENVIRONMENT=production

# ==========================================
# Security
# ==========================================

# Rate limiting (requests per minute)
RATE_LIMIT_MAX=100

# Session secret (generate with: openssl rand -base64 32)
SESSION_SECRET=REPLACE_WITH_SECURE_RANDOM_STRING

# CSRF token secret (generate with: openssl rand -base64 32)
CSRF_SECRET=REPLACE_WITH_SECURE_RANDOM_STRING

# ==========================================
# Feature Flags
# ==========================================

# Enable/disable features
FEATURE_TELEGRAM_BOT=false
FEATURE_LOYALTY_PROGRAM=true
FEATURE_GIFT_CARDS=true
FEATURE_IIKO_SYNC=false

# ==========================================
# Redis Configuration (Optional - for caching)
# ==========================================

# Redis connection URL
REDIS_URL=redis://localhost:6379

# Redis password (if enabled)
REDIS_PASSWORD=

# ==========================================
# Email Configuration (Optional)
# ==========================================

# SMTP settings
SMTP_HOST=smtp.exmail.qq.com
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=noreply@your-domain.com
SMTP_PASSWORD=YOUR_SMTP_PASSWORD
SMTP_FROM=CHU TEA <noreply@your-domain.com>
