name: "Step 1: UI Logic Analyzer"

on:
  push:
    paths:
      - 'ui/**'  # ç›‘å¬ Manus åŒæ­¥è¿‡æ¥çš„ UI æ–‡ä»¶å¤¹

jobs:
  analyze_and_notify:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: AI Logic Analysis
        id: analyzer
        run: |
          # è¿™é‡Œæ¨¡æ‹Ÿå¤§æ¨¡å‹åˆ†æ Manus ä»£ç çš„é€»è¾‘
          echo "ANALYSIS_REPORT<<EOF" >> $GITHUB_ENV
          echo "ğŸ” **Manus UI è¯­ä¹‰åˆ†ææŠ¥å‘Š**" >> $GITHUB_ENV
          echo "-------------------------------" >> $GITHUB_ENV
          echo "ğŸ“ **æ£€æµ‹åˆ°æ–°é¡µé¢**: Dashboard.html, Login.html" >> $GITHUB_ENV
          echo "âš¡ **äº¤äº’é€»è¾‘**: ç”¨æˆ·ç‚¹å‡»'ç™»å½•'å°†è§¦å‘ API é‰´æƒï¼›å›¾è¡¨æ¯ 30s è‡ªåŠ¨åˆ·æ–°ã€‚" >> $GITHUB_ENV
          echo "ğŸ› ï¸ **æŠ€æœ¯æ ˆ**: React + Tailwind" >> $GITHUB_ENV
          echo "-------------------------------" >> $GITHUB_ENV
          echo "è¯·å›å¤æŒ‡ä»¤ç¡®è®¤ï¼š/approve_logic æˆ– /rewrite_logic" >> $GITHUB_ENV
          echo "EOF" >> $GITHUB_ENV

      - name: Send Telegram Notification
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            ${{ env.ANALYSIS_REPORT }}
